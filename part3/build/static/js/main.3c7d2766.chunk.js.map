{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/phoneService.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","val","onChange","changeValue","PersonForm","onSubmit","submit","name","nameChangeHanldler","number","numberChangeHandler","type","baseUrl","axios","get","then","response","data","newPerson","post","person","delete","id","put","Persons","persons","filter","includes","map","filtered","onClick","handleDelete","Notification","success","className","error","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filterValue","setFilterValue","setError","setSuccess","fetchPersons","phoneService","useEffect","event","target","e","preventDefault","personObject","c","forEach","concat","setTimeout","catch","window","confirm","updateNumber","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3c7d2766.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n  return (\n    <div>\n        filter by name <input value={props.val} onChange={props.changeValue}/>\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n  return (\n    <div>\n      <form onSubmit={props.submit}>\n        <div>\n          name: <input value={props.name}\n          onChange={props.nameChangeHanldler}/>\n        </div>\n        <div>number: <input value={props.number}\n          onChange={props.numberChangeHandler}/></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm","import axios from \"axios\";\nconst baseUrl = \"/api/persons/\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n\n  return request.then((response) => response.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\nconst removePerson = (person) => {\n  const request = axios.delete(baseUrl + person.id);\n  return request.then((response) => response.data);\n};\nconst update = (id, person) => {\n  const request = axios.put(baseUrl + id, person);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, removePerson, update };\n","import React from 'react'\n\n\nconst Persons = (props) => {\n  return (\n    <div>\n      <div>{props.persons.filter(person => person.name.includes(props.filter)).map(filtered => \n      <div key={filtered.name}>{filtered.name} {filtered.number}<button onClick={()=> props.handleDelete(filtered)}>delete</button></div>)}\n    </div>\n    </div>\n  )\n}\n\nexport default Persons","const Notification = (props) => {\n  if (props.success) {\n    return <div className={\"success\"}>{props.success}</div>;\n  }\n  if (props.error) {\n    return <div className={\"error\"}>{props.error}</div>;\n  } else return null;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport phoneService from \"./services/phoneService\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const fetchPersons = () => {\n    phoneService.getAll().then((response) => {\n      setPersons(response);\n    });\n  };\n\n  useEffect(() => {\n    fetchPersons();\n  }, []);\n\n  const updateNumber = (id, e) => {\n    var result = window.confirm(\n      `${newName} is already added to phonebook, replace the old number with new one?`\n    );\n    if (result === true) {\n      phoneService.update(id, e).then(() => {\n        setSuccess(`Updated ${newName}`);\n        fetchPersons();\n        setTimeout(() => {\n          setSuccess(null);\n        }, 5000);\n      });\n    }\n  };\n\n  const deletePerson = (e) => {\n    var result = window.confirm(`delete ${e.name}?`);\n    if (result === true) {\n      phoneService\n        .removePerson(e)\n        .then(() => fetchPersons())\n        .catch((error) => {\n          console.log(error);\n          setError(`User ${e.name} was already deleted.`);\n          setTimeout(() => {\n            fetchPersons();\n            setError(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    var c = 0;\n    persons.forEach((e) => {\n      if (e.name === newName || e.number === newNumber) {\n        c += 1;\n      }\n      return c;\n    });\n\n    if (c === 0) {\n      phoneService.create(personObject).then((response) => {\n        setPersons(persons.concat(response));\n        setSuccess(`Added ${newName}`);\n        setTimeout(() => {\n          setSuccess(null);\n        }, 5000);\n        setNewName(\"\");\n        setNewNumber(\"\");\n      }).catch(error => {\n        setError(error.response.data.error);\n        setTimeout(() => {\n          setError(null);\n        }, 5000);\n      });\n    } else {\n      var id;\n      persons.forEach((e) => {\n        if (e.name === newName) {\n          id = e.id;\n        }\n      });\n      updateNumber(id, personObject);\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterChange = (event) => {\n    setFilterValue(event.target.value);\n  };\n\n  return (\n    <div>\n      <Notification success={success} error={error} />\n      <h2>Phonebook</h2>\n      <Filter val={filterValue} changeValue={handleFilterChange} />\n      <h2>Add a new</h2>\n      <PersonForm\n        name={newName}\n        number={newNumber}\n        submit={addPerson}\n        nameChangeHanldler={handleNameChange}\n        numberChangeHandler={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        handleDelete={deletePerson}\n        filter={filterValue}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}